<html xmlns:c="http://www.concordion.org/2007/concordion">
<link href="../../../../concordion.css" rel="stylesheet" type="text/css" />
<body>

<h1>Variable Scope in Examples</h1>

<p>Concordion has support for four types of fixture field scope.</p>

<ol>
    <li>Example: fields in the fixture annotated with
        <code>@ExampleScoped</code>
        will be re-initialised between each test.
    </li>
    <li>Specification: fields in the fixture annotated with
        <code>@SpecificationScoped</code>
        will shared between tests.
    </li>
    <li>Global: fields in the fixture annotated with
        <code>@GloballyScoped</code>
        will shared between all fixtures.
    </li>
    <li>Unannotated: fields in the fixture without any annotations will be re-initialised between each test.
        This is standard jUnit behaviour (in fact, jUnit creates a new fixture object for each test).
    </li>
</ol>

<p>Note that for the annotated fields, concordion initialises the field using the default (no arguments) constructor for the
object. Concordion initialises the field before any jUnit Rules are executed, before any methods annoated with @Before
are executed, and before any methods annotated with @BeforeSpecification are executed.</p>

<p>To show this, we have two examples below. Each example increments an AtomicInteger that is scoped differently and
    echos the value</p>


<div c:example="test1">
    <h2>Test that increments counters</h2>

    <ol>
        <li c:execute="incrementAllCounters()">Increment all counters</li>

        <li>Unannotated field value is <code c:assertEquals="getExampleScopedCounter()">1</code></li>
        <li>Example scope value is <code c:assertEquals="getExampleScopedCounter()">1</code></li>
        <li>Specification scope value is <code c:echo="getSpecScopedCounter()"></code></li>
        <li>Global scope value is <code c:echo="getGlobalScopedCounter()"></code></li>

    </ol>


</div>

<div c:example="test2">
    <h2>The same test again</h2>
    <ol>
        <li c:execute="incrementAllCounters()">Increment all counters</li>

        <li>Unannotated field value is <code c:assertEquals="getExampleScopedCounter()">1</code></li>
        <li>Example scope value is <code c:assertEquals="getExampleScopedCounter()">1</code></li>
        <li>Specification scope value is <code c:echo="getSpecScopedCounter()"></code></li>
        <li>Global scope value is <code c:echo="getGlobalScopedCounter()"></code></li>

    </ol>


</div>


</body>
</html>